--- 
title: LibGDX Tutorial - A Running Game with libGDX - Part 5
date: "2014-06-07T10:09:00.001-03:00"
author: William Mora
tags: 
- Java
- software development
- libGDX
- video games
- texture atlas
- Android
- TexturePacker
permalink: /2014/06/a-running-game-with-libgdx-part-5.html
---

Check out&nbsp;<a href="http://www.williammora.com/2014/06/a-running-game-with-libgdx-part-1.html" target="_blank">part 1</a>&nbsp;for the project and world setup!<br />Check out&nbsp;<a href="http://www.williammora.com/2014/06/a-running-game-with-libgdx-part-2.html" target="_blank">part 2</a>&nbsp;for implementing controls for our runner!<br />We introduced our enemies on&nbsp;<a href="http://www.williammora.com/2014/06/a-running-game-with-libgdx-part-3.html" target="_blank">part 3</a>.<br />We rendered our background and ground on&nbsp;<a href="http://www.williammora.com/2014/06/a-running-game-with-libgdx-part-4.html" target="_blank">part 4</a>.<br /><br />Remember the code is on <a href="https://github.com/wmora/cityescape" target="_blank">GitHub</a>.&nbsp;Graphics were made by&nbsp;<a href="http://www.kenney.nl/" target="_blank">Kenney</a>. Also, a final version based on this tutorial is on&nbsp;<a href="https://play.google.com/store/apps/details?id=com.gamestudio24.cityescape.android" target="_blank">Google Play</a>.<br /><br /><h2>Where Are My Characters?</h2><div>If are coming from the&nbsp;<a href="http://www.williammora.com/2014/06/a-running-game-with-libgdx-part-4.html" target="_blank">previous part</a>, you probably know that we stopped showing our runner and the enemies but hey, at least the background and the ground are looking good! In this next part we are going to display our characters again.</div><div><br /></div><div>Let's start with the runner (I know he's not the same as the one on my final version, sorry!). So, we have four states for our guy: he's either running, jumping, dodging or too busy getting hit by the enemies. We are going to store all his textures, along with the enemies', in a texture atlas. Here is the image (<code>characters.png</code>):<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-qXVqnSm2tqQ/U4wIuV3nR6I/AAAAAAAAFY0/vWjiLZweD2M/s1600/characters.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-qXVqnSm2tqQ/U4wIuV3nR6I/AAAAAAAAFY0/vWjiLZweD2M/s1600/characters.png" height="320" width="160" /></a></div><br /><div class="separator" style="clear: both; text-align: left;">And the following is the texture file (<code>characters.txt</code>):</div><pre>characters.png<br />format: RGBA8888<br />filter: Linear,Linear<br />repeat: none<br />alienGreen_run1<br />  rotate: false<br />  xy: 2, 97<br />  size: 68, 93<br />  orig: 68, 93<br />  offset: 0, 0<br />  index: -1<br />fly_fly2<br />  rotate: false<br />  xy: 182, 195<br />  size: 65, 39<br />  orig: 65, 39<br />  offset: 0, 0<br />  index: -1<br />bee_fly2<br />  rotate: false<br />  xy: 60, 195<br />  size: 61, 42<br />  orig: 61, 42<br />  offset: 0, 0<br />  index: -1<br />alienGreen_jump<br />  rotate: false<br />  xy: 144, 2<br />  size: 67, 93<br />  orig: 67, 93<br />  offset: 0, 0<br />  index: -1<br />barnacle_bite1<br />  rotate: false<br />  xy: 144, 97<br />  size: 51, 57<br />  orig: 51, 57<br />  offset: 0, 0<br />  index: -1<br />alienGreen_dodge<br />  rotate: false<br />  xy: 2, 2<br />  size: 69, 71<br />  orig: 69, 71<br />  offset: 0, 0<br />  index: -1<br />alienGreen_hit<br />  rotate: false<br />  xy: 73, 2<br />  size: 69, 92<br />  orig: 69, 92<br />  offset: 0, 0<br />  index: -1<br />ladyBug_walk1<br />  rotate: false<br />  xy: 2, 245<br />  size: 61, 34<br />  orig: 61, 34<br />  offset: 0, 0<br />  index: -1<br />fly_fly1<br />  rotate: false<br />  xy: 123, 195<br />  size: 57, 45<br />  orig: 57, 45<br />  offset: 0, 0<br />  index: -1<br />bee_fly1<br />  rotate: false<br />  xy: 2, 195<br />  size: 56, 48<br />  orig: 56, 48<br />  offset: 0, 0<br />  index: -1<br />ladyBug_walk2<br />  rotate: false<br />  xy: 65, 245<br />  size: 59, 42<br />  orig: 59, 42<br />  offset: 0, 0<br />  index: -1<br />worm_walk2<br />  rotate: false<br />  xy: 146, 298<br />  size: 63, 23<br />  orig: 63, 23<br />  offset: 0, 0<br />  index: -1<br />spider_walk2<br />  rotate: false<br />  xy: 2, 298<br />  size: 77, 53<br />  orig: 77, 53<br />  offset: 0, 0<br />  index: -1<br />worm_walk1<br />  rotate: false<br />  xy: 81, 298<br />  size: 63, 23<br />  orig: 63, 23<br />  offset: 0, 0<br />  index: -1<br />alienGreen_run2<br />  rotate: false<br />  xy: 72, 97<br />  size: 70, 96<br />  orig: 70, 96<br />  offset: 0, 0<br />  index: -1<br />barnacle_bite2<br />  rotate: false<br />  xy: 197, 97<br />  size: 51, 58<br />  orig: 51, 58<br />  offset: 0, 0<br />  index: -1<br />spider_walk1<br />  rotate: false<br />  xy: 126, 245<br />  size: 72, 51<br />  orig: 72, 51<br />  offset: 0, 0<br />  index: -1<br /></pre>So if you are new to this you are probably asking yourself "What kind of sorcery is this?". Well, I used <a href="http://www.codeandweb.com/texturepacker">TexturePacker</a> to put together my <code>.png</code> files (they have an option for libGDX textures) and the two files were automatically generated. LibGDX also has its own <a href="https://github.com/libgdx/libgdx/wiki/Texture-packer">TexturePacker</a> but I've never tried it. My guess is that it would work even better for this game. Both of these files are stored in the <code>assets</code> directory. <br /><br />The texture regions when the runner is <code>hit</code>, <code>dodging</code> or <code>jumping</code> are easy to get since they consist of a static frame (alienGreen_hit, alienGreen_dodge, and alienGreen_jump), we set a separate <code>TextureRegion</code> for each state and apply it inside our <code>draw</code> function. For the running state, we have two frames (alienGreen_run1 and alienGreen_run2) which we'll use to create an <code>Animation</code>. <br /><br />First, let's take note of all this in our <code>Constants</code> class: <br /><pre>package com.gamestudio24.cityescape.utils;<br /><br />import com.badlogic.gdx.math.Vector2;<br /><br />public class Constants {<br /><br />    ...<br /><br /><b>    public static final String CHARACTERS_ATLAS_PATH = "characters.txt";<br />    public static final String[] RUNNER_RUNNING_REGION_NAMES = new String[] {"alienGreen_run1", "alienGreen_run2"};<br />    public static final String RUNNER_DODGING_REGION_NAME = "alienGreen_dodge";<br />    public static final String RUNNER_HIT_REGION_NAME = "alienGreen_hit";<br />    public static final String RUNNER_JUMPING_REGION_NAME = "alienGreen_jump";<br /></b><br />}<br /></pre>And in our <code>Runner</code> class, let's assign these <code>TextureRegion</code> objects along with the running <code>Animation</code>. <br /><pre>package com.gamestudio24.cityescape.actors;<br /><br /><b>import com.badlogic.gdx.Gdx;<br />import com.badlogic.gdx.graphics.g2d.Animation;<br />import com.badlogic.gdx.graphics.g2d.Batch;<br />import com.badlogic.gdx.graphics.g2d.TextureAtlas;<br />import com.badlogic.gdx.graphics.g2d.TextureRegion;</b><br />import com.badlogic.gdx.physics.box2d.Body;<br />import com.gamestudio24.cityescape.box2d.RunnerUserData;<br /><b>import com.gamestudio24.cityescape.utils.Constants;</b><br /><br />public class Runner extends GameActor {<br /><br />    private boolean dodging;<br />    private boolean jumping;<br />    private boolean hit;<br /><b>    private Animation runningAnimation;<br />    private TextureRegion jumpingTexture;<br />    private TextureRegion dodgingTexture;<br />    private TextureRegion hitTexture;<br />    private float stateTime;</b><br /><br />    public Runner(Body body) {<br />        super(body);<br /><b>        TextureAtlas textureAtlas = new TextureAtlas(Constants.CHARACTERS_ATLAS_PATH);<br />        TextureRegion[] runningFrames = new TextureRegion[Constants.RUNNER_RUNNING_REGION_NAMES.length];<br />        for (int i = 0; i &lt; Constants.RUNNER_RUNNING_REGION_NAMES.length; i++) {<br />            String path = Constants.RUNNER_RUNNING_REGION_NAMES[i];<br />            runningFrames[i] = textureAtlas.findRegion(path);<br />        }<br />        runningAnimation = new Animation(0.1f, runningFrames);<br />        stateTime = 0f;<br />        jumpingTexture = textureAtlas.findRegion(Constants.RUNNER_JUMPING_REGION_NAME);<br />        dodgingTexture = textureAtlas.findRegion(Constants.RUNNER_DODGING_REGION_NAME);<br />        hitTexture = textureAtlas.findRegion(Constants.RUNNER_HIT_REGION_NAME);</b><br />    }<br /><br />    @Override<br />    public void draw(Batch batch, float parentAlpha) {<br />        super.draw(batch, parentAlpha);<br /><b><br />        if (dodging) {<br />            batch.draw(dodgingTexture, screenRectangle.x, screenRectangle.y + screenRectangle.height / 4, screenRectangle.width,<br />                    screenRectangle.height * 3 / 4);<br />        } else if (hit) {<br />            // When he's hit we also want to apply rotation if the body has been rotated<br />            batch.draw(hitTexture, screenRectangle.x, screenRectangle.y, screenRectangle.width * 0.5f,<br />                    screenRectangle.height * 0.5f, screenRectangle.width, screenRectangle.height, 1f, 1f,<br />                    (float) Math.toDegrees(body.getAngle()));<br />        } else if (jumping) {<br />            batch.draw(jumpingTexture, screenRectangle.x, screenRectangle.y, screenRectangle.width,<br />                    screenRectangle.height);<br />        } else {<br />            // Running<br />            stateTime += Gdx.graphics.getDeltaTime();<br />            batch.draw(runningAnimation.getKeyFrame(stateTime, true), screenRectangle.x, screenRectangle.y,<br />                    screenRectangle.getWidth(), screenRectangle.getHeight());<br />        }</b><br />    }<br /><br />    ...<br /><br />}<br /></pre>That's all there is for animating the <code>Runner</code>. Run the project and see the guy run and get hit by the enemies we still don't see :D. The video below shows how the game looks so far:  <br /><br /><div class="separator" style="clear: both; text-align: center;"><object width="320" height="266" class="BLOG_video_class" id="BLOG_video-55c6e556d4987add" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="movie" value="//www.youtube.com/get_player"><param name="bgcolor" value="#FFFFFF"><param name="allowfullscreen" value="true"><param name="flashvars" value="flvurl=http://redirector.googlevideo.com/videoplayback?id%3D55c6e556d4987add%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%253Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1421596483%26sparams%3Did,itag,source,ip,ipbits,expire%26signature%3D9456123EAFA5D2FD68F2BEFDA4A4F0A06712C8E1.90F31FC8C17654A619CE3739E115754A288B56F%26key%3Dck2&amp;iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3D55c6e556d4987add%26offsetms%3D5000%26itag%3Dw160%26sigh%3DOyhix4sfX37SfHprMSMhg3vU-54&amp;autoplay=0&amp;ps=blogger"><embed src="//www.youtube.com/get_player" type="application/x-shockwave-flash" width="320" height="266" bgcolor="#FFFFFF" flashvars="flvurl=http://redirector.googlevideo.com/videoplayback?id%3D55c6e556d4987add%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%253Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1421596483%26sparams%3Did,itag,source,ip,ipbits,expire%26signature%3D9456123EAFA5D2FD68F2BEFDA4A4F0A06712C8E1.90F31FC8C17654A619CE3739E115754A288B56F%26key%3Dck2&iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3D55c6e556d4987add%26offsetms%3D5000%26itag%3Dw160%26sigh%3DOyhix4sfX37SfHprMSMhg3vU-54&autoplay=0&ps=blogger" allowFullScreen="true" /></object></div><h3></h3><h3>Know Thy Enemy</h3></div><div>I will take advantage of our <code>EnemyType enum</code> to store all the texture region names needed for each <code>Enemy</code>. They will be very easy to render now that we know how to render an <code>Animation</code>. Each enemy has its own sprites, I will set them as follows:  <br /><ul><li>Running small - lady bug&nbsp;</li><li>Running wide - worm</li><li>Running long - barnacle</li><li>Running big - spider</li><li>Flying small - bee</li><li>Flying wide - fly</li></ul></div>Let's add these values in our <code>Constants</code>: <br /><pre>package com.gamestudio24.cityescape.utils;<br /><br />import com.badlogic.gdx.math.Vector2;<br /><br />public class Constants {<br /><br />    ...<br /><br /><b>    public static final String[] RUNNING_SMALL_ENEMY_REGION_NAMES = new String[] {"ladyBug_walk1", "ladyBug_walk2"};<br />    public static final String[] RUNNING_LONG_ENEMY_REGION_NAMES = new String[] {"barnacle_bite1", "barnacle_bite2"};<br />    public static final String[] RUNNING_BIG_ENEMY_REGION_NAMES = new String[] {"spider_walk1", "spider_walk2"};<br />    public static final String[] RUNNING_WIDE_ENEMY_REGION_NAMES = new String[] {"worm_walk1", "worm_walk2"};<br />    public static final String[] FLYING_SMALL_ENEMY_REGION_NAMES = new String[] {"bee_fly1", "bee_fly2"};<br />    public static final String[] FLYING_WIDE_ENEMY_REGION_NAMES = new String[] {"fly_fly1", "fly_fly2"};<br /></b><br />}<br /></pre>And as I mentioned before, use <code>EnemyType</code> to store these values: <br /><pre>package com.gamestudio24.cityescape.enums;<br /><br />import com.gamestudio24.cityescape.utils.Constants;<br /><br />public enum EnemyType {<br /><br />    <b>RUNNING_SMALL(1f, 1f, Constants.ENEMY_X, Constants.RUNNING_SHORT_ENEMY_Y, Constants.ENEMY_DENSITY,<br />            Constants.RUNNING_SMALL_ENEMY_REGION_NAMES),<br />    RUNNING_WIDE(2f, 1f, Constants.ENEMY_X, Constants.RUNNING_SHORT_ENEMY_Y, Constants.ENEMY_DENSITY,<br />            Constants.RUNNING_WIDE_ENEMY_REGION_NAMES),<br />    RUNNING_LONG(1f, 2f, Constants.ENEMY_X, Constants.RUNNING_LONG_ENEMY_Y, Constants.ENEMY_DENSITY,<br />            Constants.RUNNING_LONG_ENEMY_REGION_NAMES),<br />    RUNNING_BIG(2f, 2f, Constants.ENEMY_X, Constants.RUNNING_LONG_ENEMY_Y, Constants.ENEMY_DENSITY,<br />            Constants.RUNNING_BIG_ENEMY_REGION_NAMES),<br />    FLYING_SMALL(1f, 1f, Constants.ENEMY_X, Constants.FLYING_ENEMY_Y, Constants.ENEMY_DENSITY,<br />            Constants.FLYING_SMALL_ENEMY_REGION_NAMES),<br />    FLYING_WIDE(2f, 1f, Constants.ENEMY_X, Constants.FLYING_ENEMY_Y, Constants.ENEMY_DENSITY,<br />            Constants.FLYING_WIDE_ENEMY_REGION_NAMES);</b><br /><br />    private ...<br />    <b>private String[] regions;</b><br /><br /><b>    EnemyType(float width, float height, float x, float y, float density, String[] regions)</b> {<br />        this.width = width;<br />        this.height = height;<br />        this.x = x;<br />        this.y = y;<br />        this.density = density;<br /><b>        this.regions = regions;</b><br />    }<br /><br />    ...<br /><br />    <b>public String[] getRegions() {<br />        return regions;<br />    }</b><br />}<br /></pre>Our <code>EnemyUserData</code> should now store the region names the <code>Enemy</code> should render. We'll pass the texture regions set in the constructor: <br /><pre>package com.gamestudio24.cityescape.box2d;<br /><br />import ...<br /><br />public class EnemyUserData extends UserData {<br /><br />    private Vector2 linearVelocity;<br />    <b>private String[] textureRegions;</b><br /><br />    <b>public EnemyUserData(float width, float height, String[] textureRegions) {</b><br />        super(width, height);<br />        userDataType = UserDataType.ENEMY;<br />        linearVelocity = Constants.ENEMY_LINEAR_VELOCITY;<br />        <b>this.textureRegions = textureRegions;</b><br />    }<br /><br />    public void setLinearVelocity(Vector2 linearVelocity) {<br />        this.linearVelocity = linearVelocity;<br />    }<br /><br />    public Vector2 getLinearVelocity() {<br />        return linearVelocity;<br />    }<br /><br /><b>    public String[] getTextureRegions() {<br />        return textureRegions;<br />    }</b><br />}<br /></pre>And modify our <code>EnemyUserData</code> instantiation inside <code>WorldUtils</code>: <br /><pre>package com.gamestudio24.cityescape.utils;<br /><br />import ...<br /><br />public class WorldUtils {<br /><br />    ...<br /><br />    public static Body createEnemy(World world) {<br />        ...<br /><b>        EnemyUserData userData = new EnemyUserData(enemyType.getWidth(), enemyType.getHeight(), enemyType.getRegions());</b><br />        body.setUserData(userData);<br />        shape.dispose();<br />        return body;<br />    }<br /><br />}<br /></pre>Now we have all the assets we need to render the enemies! The logic to render them will be fairly similar to the logic we used to render our <code>Runner</code> with one exception. I'm rendering a bigger rectangle than the actual physics body (20% wider, 10% higher). The purpose of this is to make a little bit of overlapping possible between the runner and enemies so the hits look more real. The changes are the following: <br /><pre>package com.gamestudio24.cityescape.actors;<br /><br /><b>import com.badlogic.gdx.Gdx;<br />import com.badlogic.gdx.graphics.g2d.Animation;<br />import com.badlogic.gdx.graphics.g2d.Batch;<br />import com.badlogic.gdx.graphics.g2d.TextureAtlas;<br />import com.badlogic.gdx.graphics.g2d.TextureRegion;</b><br />import com.badlogic.gdx.physics.box2d.Body;<br />import com.gamestudio24.cityescape.box2d.EnemyUserData;<br /><b>import com.gamestudio24.cityescape.utils.Constants;</b><br /><br />public class Enemy extends GameActor {<br /><br />    private Animation animation;<br />    private float stateTime;<br /><br />    public Enemy(Body body) {<br />        super(body);<br /><b>        TextureAtlas textureAtlas = new TextureAtlas(Constants.CHARACTERS_ATLAS_PATH);<br />        TextureRegion[] runningFrames = new TextureRegion[getUserData().getTextureRegions().length];<br />        for (int i = 0; i &lt; getUserData().getTextureRegions().length; i++) {<br />            String path = getUserData().getTextureRegions()[i];<br />            runningFrames[i] = textureAtlas.findRegion(path);<br />        }<br />        animation = new Animation(0.1f, runningFrames);<br />        stateTime = 0f;</b><br />    }<br /><br />    ...<br /><br />    <b>@Override<br />    public void draw(Batch batch, float parentAlpha) {<br />        super.draw(batch, parentAlpha);<br />        stateTime += Gdx.graphics.getDeltaTime();<br />        batch.draw(animation.getKeyFrame(stateTime, true), (screenRectangle.x - (screenRectangle.width * 0.1f)), <br />                screenRectangle.y, screenRectangle.width * 1.2f, screenRectangle.height * 1.1f);<br />    }</b><br />}<br /></pre>Run the game and now you will see your fierce enemies coming towards you! Jump and dodge to avoid getting hit by any of them! The game should be working like in the video below: <br /><br /><div class="separator" style="clear: both; text-align: center;"><object width="320" height="266" class="BLOG_video_class" id="BLOG_video-b8055468db2d6633" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="movie" value="//www.youtube.com/get_player"><param name="bgcolor" value="#FFFFFF"><param name="allowfullscreen" value="true"><param name="flashvars" value="flvurl=http://redirector.googlevideo.com/videoplayback?id%3Db8055468db2d6633%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%253Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1421596483%26sparams%3Did,itag,source,ip,ipbits,expire%26signature%3D50C5B1509C182BAD2AFAE929E35B667C9618C81.91D048475462ECA5A96979661D69D3DCF51E145C%26key%3Dck2&amp;iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3Db8055468db2d6633%26offsetms%3D5000%26itag%3Dw160%26sigh%3D8OEzJx7ktj7CmzVWYUlr7bM9NzQ&amp;autoplay=0&amp;ps=blogger"><embed src="//www.youtube.com/get_player" type="application/x-shockwave-flash" width="320" height="266" bgcolor="#FFFFFF" flashvars="flvurl=http://redirector.googlevideo.com/videoplayback?id%3Db8055468db2d6633%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%253Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1421596483%26sparams%3Did,itag,source,ip,ipbits,expire%26signature%3D50C5B1509C182BAD2AFAE929E35B667C9618C81.91D048475462ECA5A96979661D69D3DCF51E145C%26key%3Dck2&iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3Db8055468db2d6633%26offsetms%3D5000%26itag%3Dw160%26sigh%3D8OEzJx7ktj7CmzVWYUlr7bM9NzQ&autoplay=0&ps=blogger" allowFullScreen="true" /></object></div><div><br />Finally, I'd like to go back to our <code>Runner</code> drawing and apply the same ratio we just applied to our enemies (only 20% wider, though) so the overlapping also applies nicely to our <code>Runner</code>: <br /><pre>package com.gamestudio24.cityescape.actors;<br /><br />import ...<br /><br />public class Runner extends GameActor {<br /><br />    ...<br /><br />    @Override<br />    public void draw(Batch batch, float parentAlpha) {<br />        super.draw(batch, parentAlpha);<br /><br />        <b>float x = screenRectangle.x - (screenRectangle.width * 0.1f);<br />        float y = screenRectangle.y;<br />        float width = screenRectangle.width * 1.2f;</b><br /><br />        if (dodging) {<br />            <b>batch.draw(dodgingTexture, x, y + screenRectangle.height / 4, width, screenRectangle.height * 3 / 4);</b><br />        } else if (hit) {<br />            // When he's hit we also want to apply rotation if the body has been rotated<br /><b>            batch.draw(hitTexture, x, y, width * 0.5f, screenRectangle.height * 0.5f, width, screenRectangle.height, 1f,<br />                    1f, (float) Math.toDegrees(body.getAngle()));</b><br />        } else if (jumping) {<br /><b>            batch.draw(jumpingTexture, x, y, width, screenRectangle.height);</b><br />        } else {<br />            // Running<br />            stateTime += Gdx.graphics.getDeltaTime();<br /><b>            batch.draw(runningAnimation.getKeyFrame(stateTime, true), x, y, width, screenRectangle.height);</b><br />        }<br />    }<br /><br />    ...<br /><br />}<br /></pre>Run the game one last time to make sure everything is working as expected:  <br /><br /><div class="separator" style="clear: both; text-align: center;"><object width="320" height="266" class="BLOG_video_class" id="BLOG_video-9308d88388421eb6" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="movie" value="//www.youtube.com/get_player"><param name="bgcolor" value="#FFFFFF"><param name="allowfullscreen" value="true"><param name="flashvars" value="flvurl=http://redirector.googlevideo.com/videoplayback?id%3D9308d88388421eb6%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%253Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1421596483%26sparams%3Did,itag,source,ip,ipbits,expire%26signature%3D19E2A9FDB7DE4B74D1203D56BFD26FFABDB3A9B1.864348F0B9138C9993C5EF360F8655E4DB9F2B7E%26key%3Dck2&amp;iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3D9308d88388421eb6%26offsetms%3D5000%26itag%3Dw160%26sigh%3DOKeGtKxIzyZfGd8BVCPGfWRnzaE&amp;autoplay=0&amp;ps=blogger"><embed src="//www.youtube.com/get_player" type="application/x-shockwave-flash" width="320" height="266" bgcolor="#FFFFFF" flashvars="flvurl=http://redirector.googlevideo.com/videoplayback?id%3D9308d88388421eb6%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%253Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1421596483%26sparams%3Did,itag,source,ip,ipbits,expire%26signature%3D19E2A9FDB7DE4B74D1203D56BFD26FFABDB3A9B1.864348F0B9138C9993C5EF360F8655E4DB9F2B7E%26key%3Dck2&iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3D9308d88388421eb6%26offsetms%3D5000%26itag%3Dw160%26sigh%3DOKeGtKxIzyZfGd8BVCPGfWRnzaE&autoplay=0&ps=blogger" allowFullScreen="true" /></object></div><br /><h3>That's a Wrap!</h3></div><div>Congrats on making it this far! I hope that this guide helped you understand a little better the basics of libGDX, using box2d and scene2d, and adding textures to your game. There are probably many things I could've done better, but I'm satisfied with the final product for teaching purposes.</div><div><br /></div><div>I added more stuff to the game such as UI controls for menus, playing music and sounds, integrated <a href="https://developers.google.com/games/services/downloads/" target="_blank">Google Play Game Services</a>&nbsp;as well as tweaked it a little bit to gradually increase the speed of the game. That's fairly easy to implement and I think you can do it following libGDX's <a href="https://github.com/libgdx/libgdx/wiki" target="_blank">wiki</a>&nbsp;and other&nbsp;<a href="https://github.com/libgdx/libgdx/wiki/External-tutorials" target="_blank">tutorials</a>. If I have time, I will add a few more posts for implementing them.</div><div><br /></div><div>Thanks for reading. If you liked this tutorial, I would really appreciate it if you could help spread the word by sharing this post.<br /><br />Cheers!</div>